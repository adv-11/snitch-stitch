version: "1.0"

contexts:
  # ============================================================
  # PROJECT CONFIGURATION
  # ============================================================

  pyproject:
    paths: ["*pyproject*"]
    defaults:
      outputs:
        code:
          path: "pyproject.toml"

  # ============================================================
  # CORE MODULES
  # ============================================================

  ingest:
    paths: ["*ingest*"]
    defaults:
      outputs:
        code:
          path: "snitch_stitch/ingest.py"

  backend_scanner:
    paths: ["*backend_scanner*"]
    defaults:
      outputs:
        code:
          path: "snitch_stitch/backend_scanner.py"

  frontend_scanner:
    paths: ["*frontend_scanner*"]
    defaults:
      outputs:
        code:
          path: "snitch_stitch/frontend_scanner.py"

  ranker:
    paths: ["*ranker*"]
    defaults:
      outputs:
        code:
          path: "snitch_stitch/ranker.py"

  diff_display:
    paths: ["*diff_display*"]
    defaults:
      outputs:
        code:
          path: "snitch_stitch/diff_display.py"

  fixer:
    paths: ["*fixer*"]
    defaults:
      outputs:
        code:
          path: "snitch_stitch/fixer.py"

  # ============================================================
  # CLI ORCHESTRATION
  # ============================================================

  cli:
    paths: ["*cli*"]
    defaults:
      outputs:
        code:
          path: "snitch_stitch/cli.py"

  # ============================================================
  # PACKAGE INIT
  # ============================================================

  package_init:
    paths: ["*package_init*"]
    defaults:
      outputs:
        code:
          path: "snitch_stitch/__init__.py"

  # ============================================================
  # DEFAULT FALLBACK
  # ============================================================
  # CRITICAL: prompts_dir goes ONLY here, not in other contexts!

  default:
    defaults:
      prompts_dir: "prompts/"
      generate_output_path: "snitch_stitch/"

# ============================================================
# MODULES SECTION
# ============================================================
# Maps basenames to their output filepaths for pdd sync

modules:
  pyproject:
    filepath: "pyproject.toml"
    prompts_dir: "prompts/"

  package_init:
    filepath: "snitch_stitch/__init__.py"
    prompts_dir: "prompts/"

  ingest:
    filepath: "snitch_stitch/ingest.py"
    prompts_dir: "prompts/"

  backend_scanner:
    filepath: "snitch_stitch/backend_scanner.py"
    prompts_dir: "prompts/"

  frontend_scanner:
    filepath: "snitch_stitch/frontend_scanner.py"
    prompts_dir: "prompts/"

  ranker:
    filepath: "snitch_stitch/ranker.py"
    prompts_dir: "prompts/"

  diff_display:
    filepath: "snitch_stitch/diff_display.py"
    prompts_dir: "prompts/"

  fixer:
    filepath: "snitch_stitch/fixer.py"
    prompts_dir: "prompts/"

  cli:
    filepath: "snitch_stitch/cli.py"
    prompts_dir: "prompts/"
